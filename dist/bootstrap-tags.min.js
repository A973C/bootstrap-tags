/*!
 * bootstrap-tags 0.1.1
 * https://github.com/maxwells/bootstrap-tags
 * Copyright 2013 Max Lahey; Licensed MIT
 */

!function($){this.JST=this.JST||{},this.JST["templates/tag"]=function(obj){obj||(obj={});var __t,__p="";with(_.escape,obj)__p+="<div class='tag-label "+(null==(__t=options.labelClass)?"":__t)+"'>\n  <div class='text'>\n    "+(null==(__t=model.name)?"":__t)+'\n  </div>\n  <div class=\'\'>\n    <button type="button" class="close bootstrap-tags-label-close" aria-hidden="true">&times;</button>\n  </div>\n</div>';return __p},this.JST["templates/tagger"]=function(obj){obj||(obj={});var __p="";with(_.escape,obj)__p+="<div class='tagger'>\n  <div class='tags'></div>\n  <input type='text' class='form-control tags-input input-sm'>\n</div>";return __p},function(){var a;a=function(){function a(){}return a.prototype.on=function(a,b,c){var d;return null==c&&(c=window),this.callbacks||(this.callbacks={}),(d=this.callbacks)[a]||(d[a]=[]),this.callbacks[a].push({callback:b,context:c})},a.prototype.off=function(a,b){var c,d,e,f,g,h,i,j,k,l;for(this.callbacks||(this.callbacks={}),(f=this.callbacks)[a]||(f[a]=[]),e=[],k=this.callbacks[a],d=g=0,i=k.length;i>g;d=++g)c=k[d],b===c.callback&&e.unshift(d);for(l=[],h=0,j=e.length;j>h;h++)d=e[h],l.push(this.callbacks[a].splice(d,1));return l},a.prototype.trigger=function(a){var b,c,d,e,f,g,h;for(b=Array.prototype.slice.call(arguments,1),this.callbacks||(this.callbacks={}),(d=this.callbacks)[a]||(d[a]=[]),g=this.callbacks[a],h=[],e=0,f=g.length;f>e;e++)c=g[e],h.push(c.callback.apply(c.context,b));return h},a}(),window.Events=a}.call(this),function(){var a,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};a=function(a){function c(){return b=c.__super__.constructor.apply(this,arguments)}return d(c,a),c}(Events),window.Tags||(window.Tags={}),window.Tags.Models={Base:a}}.call(this),function(){var a={}.hasOwnProperty,b=function(b,c){function d(){this.constructor=b}for(var e in c)a.call(c,e)&&(b[e]=c[e]);return d.prototype=c.prototype,b.prototype=new d,b.__super__=c.prototype,b};Tags.Models.Tag=function(a){function c(a){this.name=a}return b(c,a),c}(Tags.Models.Base)}.call(this),function(){Tags.Models.TagsCollection=function(){function a(a){this.tags=a||[]}return a.prototype.each=function(a){var b,c,d,e,f;for(e=this.tags,f=[],c=0,d=e.length;d>c;c++)b=e[c],f.push(a(b));return f},a.prototype.create=function(a){var b;return b=new Tags.Models.Tag(a),this.tags.push(b),b},a.prototype.remove=function(a){var b,c;return b=[],c=[],this.each(function(d){return d.name===a?c.push(d):b.push(d)}),this.tags=b,c},a.prototype.removeModel=function(a){var b,c,d,e,f,g;for(f=this.tags,g=[],b=d=0,e=f.length;e>d;b=++d)c=f[b],c===a?g.push(this.tags.splice(b,1)):g.push(void 0);return g},a.prototype.getTags=function(){return this.each(function(a){return a.name})},a}()}.call(this),function(){var a,b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};a=function(a){function b(){this.$el=$("<"+this.tagName+" class='"+this.classes+"'></"+this.tagName+">"),this.el=this.$el[0]}return c(b,a),b.prototype.tagName="div",b.prototype.classes="",b.prototype.$=function(a){return this.$el.find(a)},b.prototype.$template=function(a){return $(this.template(a))},b}(Events),window.Tags||(window.Tags={}),window.Tags.Views={Base:a}}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};Tags.Views.Tag=function(b){function d(b){null==b&&(b={}),this.destroy=a(this.destroy,this),d.__super__.constructor.call(this),$.extend(this,b)}return c(d,b),d.prototype.template=JST["templates/tag"],d.prototype.classes="tag",d.prototype.destroy=function(){return this.trigger("destroyed",this.model)},d.prototype.render=function(a){return this.$el.html(this.$template({options:a,model:this.model})),this.$(".close").click(this.destroy),this},d}(Tags.Views.Base),window.Tag=Tags.Views.Tag}.call(this),function(){var a=function(a,b){return function(){return a.apply(b,arguments)}},b={}.hasOwnProperty,c=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a};Tags.Views.Tagger=function(b){function d(b,c){null==c&&(c={}),this.keyDownHandler=a(this.keyDownHandler,this),d.__super__.constructor.call(this),this.$el=$(b),this.tagsCollection=new Tags.Models.TagsCollection,this.tagViews=[],$.extend(this.options={},this.defaultOptions,c),this.render()}return c(d,b),d.prototype.template=JST["templates/tagger"],d.prototype.defaultOptions={readOnly:!1,suggestions:[],restrictTo:[],exclude:[],displayPopovers:!1,popoverTrigger:"hover",tagClass:"btn-info",promptText:"Enter tags...",readOnlyEmptyMessage:"No tags to display...",labelClass:"label-default",beforeAddingTag:function(){},afterAddingTag:function(){},beforeDeletingTag:function(){},afterDeletingTag:function(){},excludesTags:function(){return!1},onTagRemoved:function(){}},d.prototype.updateOptions=function(a){return null==a&&(a={}),$.extend(this.options,a),this},d.prototype.addTag=function(a){var b,c;return b=this.tagsCollection.create(a),c=new Tags.Views.Tag({model:b}),c.on("destroyed",this.removeTagByModel,this),this.tagViews.push(c),this.renderTag(c),this},d.prototype.removeTagByModel=function(a){var b,c,d,e,f,g,h,i,j;for(d=[],j=this.tagViews,b=f=0,h=j.length;h>f;b=++f)e=j[b],e.model===a&&d.unshift(b);for(g=0,i=d.length;i>g;g++)c=d[g],this.removeTagView(this.tagViews[c]);return this.tagsCollection.removeModel(a)},d.prototype.removeTagView=function(a){var b,c,d,e,f;for(this.$(a.el).remove(),this.updateTextInputPosition(),f=this.tagViews,b=d=0,e=f.length;e>d;b=++d)if(c=f[b],c===a)return this.tagViews.splice(b,1)},d.prototype.removeTag=function(a){var b,c,d,e;for(c=this.tagsCollection.remove(a),d=0,e=c.length;e>d;d++)b=c[d],this.removeTagByModel(b);return this},d.prototype.renderTag=function(a){return this.$(".tags").append(a.render({labelClass:this.options.labelClass}).el),this.updateTextInputPosition()},d.prototype.renderTags=function(){var a,b,c,d;for(d=this.tagViews,b=0,c=d.length;c>b;b++)a=d[b],this.renderTag(a);return this},d.prototype.getTags=function(){return this.tagsCollection.getTags()},d.prototype.updateTextInputPosition=function(){return this.$(".tags-input").css({"padding-left":this.$(".tags").outerWidth()})},d.prototype.keyDownHandler=function(a){var b;switch(b=null!=a.keyCode?a.keyCode:a.which){case 13:return this.addTag(a.target.value),this.$(".tags-input").val("");case 46:case 8:if(""===a.target.value)return this.removeTagView(this.tagViews[this.tagViews.length-1])}},d.prototype.setupListeners=function(){return this.$(".tags-input").keydown(this.keyDownHandler)},d.prototype.render=function(){return this.$el.html(this.$template(this)),this.renderTags(),this.setupListeners(),this},d}(Tags.Views.Base)}.call(this),function(){var a;a=function(){function a(a){this.items=a}var b,c,d,e;e=Tags.Views.Tagger.prototype,d=function(b,c){return a.prototype[b]=function(){var a,b,d,e,f;for(b=[],f=this.items,d=0,e=f.length;e>d;d++)a=f[d],b.push(c.apply($(a).data("tags"),arguments));return b[0]instanceof Tags.Views.Tagger?this:this.items.length>1?b:b[0]}};for(b in e)c=e[b],d(b,c);return a}.call(this),function(b){return b.fn.tags=function(c){return this.each(function(a,d){var e;return e=b(d),null==e.data("tags")?e.data("tags",new Tags.Views.Tagger(d,c)):e.data("tags").updateOptions(c)}),new a(this)}}($,window,document)}.call(this)}(window.jQuery);